<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modal Terms & Conditions</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-50">
    <td class="px-3 py-2">
      <button
        onclick="OpenEpayment()"
        class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded"
      >
        View E-Receipt
      </button>
    </td>
    <!-- Payment Modal -->
    <div
      id="paymentModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden"
    >
      <div class="bg-white w-full max-w-lg rounded-lg shadow-lg p-6 relative">
        <!-- Step 1: QR Scan -->
        <div id="step1">
          <h2 class="text-xl font-bold mb-4">E-Receipt</h2>
          <p class="mb-2">Booking ID</p>
          <img
            src="receiptpath here"
            alt="GCash QR"
            class="mx-auto w-48 mb-4"
          />
          <span class="flex">
            <button
              onclick="nextStep()"
              class="bg-blue-500 text-white px-4 py-2 rounded w-full"
            >
              Approve
            </button>
            <button
              onclick="nextStep()"
              class="bg-red-500 text-white px-4 py-2 rounded w-full"
            >
              Declined
            </button></span
          >
        </div>

        <!-- Step 2: Upload Receipt -->
        <div id="step2" class="hidden">
          <h2 class="text-xl font-bold mb-4">Upload E-Receipt</h2>
          <input
            type="file"
            id="receiptUpload"
            class="border p-2 w-full mb-4"
          />
          <button
            onclick="submitReceipt()"
            class="bg-green-500 text-white px-4 py-2 rounded w-full"
          >
            Submit Payment
          </button>
        </div>

        <!-- Close Btn -->
        <button
          onclick="closeModal()"
          class="absolute top-2 right-2 text-gray-500"
        >
          &times;
        </button>
      </div>
    </div>
    <script>
      function OpenEpayment(car, amount) {
        document.getElementById("paymentModal").classList.remove("hidden");
        // You can also display booking details dynamically if needed
      }

      function closeModal() {
        document.getElementById("paymentModal").classList.add("hidden");
        document.getElementById("step1").classList.remove("hidden");
        document.getElementById("step2").classList.add("hidden");
      }

      function nextStep() {
        document.getElementById("step1").classList.add("hidden");
        document.getElementById("step2").classList.remove("hidden");
      }

      function submitReceipt() {
        let file = document.getElementById("receiptUpload").files[0];
        if (!file) {
          alert("Please upload a receipt!");
          return;
        }
        // TODO: AJAX/Fetch to upload file and update payment status
        alert("Receipt submitted successfully!");
        closeModal();
      }
    </script>
  </body>
</html>
